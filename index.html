<style>
.wrapper {
font-family: 'Poppins', sans-serif;
color: #1d1d1d;
}

.wrapper {
padding: 96px 0;
}

.font-secondary {
font-family: 'Lora', serif !important;
}

.text-h1 {
font-size: 36px;
line-height: 52px;

@media (min-width: @screen-sm-min) {
font-size: 32px;
line-height: 48px;
}
}

.text-h2 {
font-size: 32px;
line-height: 36px;
font-weight: 500;

@media (min-width: @screen-sm-min) {
font-size: 28px;
line-height: 32px;
}
}

.text-body-1 {
font-size: 20px;
font-weight: 400;
line-height: 32px;

@media (min-width: @screen-sm-min) {
font-size: 18px;
line-height: 28px;
}
}

.text-body-2 {
font-size: 16px;
font-weight: 400;
line-height: 28px;

@media (min-width: @screen-sm-min) {
font-size: 14px;
line-height: 24px;
}
}

.blockquote {
font-size: 32px;
font-weight: 700;
line-height: 36px;
text-transform: uppercase;
text-align: center;

@media (min-width: @screen-sm-min) {
font-size: 28px;
}  
}

.text-caption {
font-size: 14px;
line-height: 22px;

@media (min-width: @screen-sm-min) {
font-size: 12px;
line-height: 18px; 
}
}

.wrapper a {
color: #104E8B !important;
border-bottom: none;
text-decoration: none;
word-break: break-word;
}

/* Small devices (tablets, 768px and up) */
/* @media (min-width: @screen-sm-min) { ... } */

/* Medium devices (desktops, 992px and up) */
/* @media (min-width: @screen-md-min) { ... } */

/* Large devices (large desktops, 1200px and up) */
/* @media (min-width: @screen-lg-min) { ... } */

#scrolly__section {
position: relative;
display: -webkit-box;
display: -ms-flexbox;
display: flex;
background-color: #ffffff;
padding: 1rem;
}

#scrolly__section > * {
-webkit-box-flex: 1;
-ms-flex: 1;
flex: 1;
}

.scrolly__content {
position: sticky;
padding: 0 1rem;
width: 100%;
}

.scrolly__chart {
position: sticky;
top: 20;
left: 0;
bottom: auto;
width: 100%;
}    

.scrolly__chart iframe {
width: 100%;
height: 100%;
}

.step {
margin: 0 auto 2rem auto;
border: none;
display: float;
justify-content: center;
align-items: start;      
}

.step:last-child {
margin-bottom: 0;
}

.text-block.is-active {
background-color: white;
color: #3b3b3b;
}

.text-block {
background-color: white;
}

.step p {
text-align: center;
padding: 1rem;
}

iframe {
border: unset;
}

.container {
  overflow: inherit;
}

</style>

<div class="wrapper">
<div class="container1 py-5">
<div class="row justify-content-center">
<div class="col-lg-7 col-11">

</div>
</div>
</div>

<div class="container-fluid" id="root">
<div class="row justify-content-center" id="scrolly__section">
<div class="col-4 scrolly__content">
<div class="step" data-step="1">
<div class="text-block pa-2">
<p class="text-h2">title maybe</p>
<!--<p class="text-body-2">In 2020, the Michigan League for Public Policy reported 11 counties could be considered <span style="background-color:#e17c05; color:#ffffff;"> &nbsp;child care deserts&nbsp;</span> because they had more than three children under five for every available child care spot.</p>-->
</div>
</div>
<div class="step" data-step="2">
<div class="text-block pa-2">
<!--<p class="text-body-2">lorem 2</p>-->
<p class="text-body-2">In 2020, the Michigan League for Public Policy reported 11 counties could be considered <span style="background-color:#e17c05; color:#ffffff;"> &nbsp;child care deserts&nbsp;</span> because they had more than three children under five for every available child care spot.</p>
</div>            
</div>
<div class="step" data-step="3">
<div class="text-block pa-2">
<p class="text-body-2">lorem 3</p>
<p class="text-body-2">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
</div>            
</div>
<div class="step" data-step="4">
<div class="text-block pa-2">
<p class="text-body-2">lorem 5</p>
<p class="text-body-2">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
</div>            
</div>
<div class="step" data-step="5">
<div class="text-block pa-2">
<p class="text-body-2">lorem 5</p>
<p class="text-body-2">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Accusantium debitis modi labore unde commodi, dolorem ut enim, necessitatibus odit facere et pariatur minus! Aliquam rem earum tempore accusamus corporis similique.</p>
</div>            
</div>
</div>

<div class="col-6 scrolly__chart">
<iframe scrolling="no" src="https://flo.uri.sh/story/1661078/embed#slide-0"></iframe>
</div>
</div>        
</div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
<script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
<script src="https://unpkg.com/intersection-observer"></script>
<script src="https://unpkg.com/scrollama"></script>    
<script src="https://public.flourish.studio/resources/embed.js"></script>


<!-- This code from here on is derived from the side-by-side code example from the scrollama library which can be found here: https://github.com/russellgoldenberg/scrollama  -->
<!-- I tweaked the function for handleStepEnter to accomodate the Flourish story! -->

<script>
var scrolly = d3.select("#scrolly__section");
var chart = scrolly.select(".scrolly__chart");
var content = scrolly.select(".scrolly__content");
var step = content.selectAll(".step");

// initialize the scrollama
var scroller = scrollama();

// generic window resize listener event
function handleResize() {
// 1. update height of step elements
var stepH = Math.floor(window.innerHeight * 1);
step.style("height", stepH + "px");

var figureHeight = window.innerHeight * 0.75;
var figureMarginTop = (window.innerHeight - figureHeight) / 2;

chart
.style("height", figureHeight + "px")
.style("top", figureMarginTop + "px");

// 3. tell scrollama to update new element dimensions
scroller.resize();
}

// scrollama event handlers
function handleStepEnter(response) {
const textblock = step.select(".text-block");
console.log("handle step enter", textblock);

// add color to current step only
textblock.classed("is-active", function(d, i) {
return i === response.index;
});

// update graphic based on step
const linkHead = 'https://flo.uri.sh/story/1661078/embed#slide-'
const slide = response.index
console.log("response index", response.index);

d3.select('.scrolly__chart iframe')
.attr('src', linkHead + slide);
}

function setupStickyfill() {
d3.selectAll(".sticky").each(function() {
Stickyfill.add(this);
});
}

function init() {
setupStickyfill();
handleResize();
scroller
.setup({
step: "#scrolly__section .scrolly__content .step",
offset: 0.7,
debug: true
})
.onStepEnter(handleStepEnter);

// setup resize event
window.addEventListener("resize", handleResize);
}

init();
</script>